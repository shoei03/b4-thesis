# B4 Thesis - Software Engineering Research Analysis Tool

ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢å·¥å­¦ç ”ç©¶ã®ãŸã‚ã®Python CLIåˆ†æãƒ„ãƒ¼ãƒ«

## æ¦‚è¦

ã“ã®ãƒ„ãƒ¼ãƒ«ã¯ã€ã‚³ãƒ¼ãƒ‰ã‚¯ãƒ­ãƒ¼ãƒ³æ¤œå‡ºãƒ»è¿½è·¡ã®ãŸã‚ã®Python CLIåˆ†æãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ãƒªãƒã‚¸ãƒˆãƒªã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã—ã€ã‚³ãƒ¼ãƒ‰ã‚¯ãƒ­ãƒ¼ãƒ³ã®é€²åŒ–ã‚’è¿½è·¡ã—ã¾ã™ã€‚

## æ©Ÿèƒ½

### å®Ÿè£…æ¸ˆã¿ï¼ˆPhase 1-3å®Œäº†ï¼‰

- **ã‚³ã‚¢åˆ†æãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«**:
  - `UnionFind`: ã‚°ãƒ«ãƒ¼ãƒ—æ¤œå‡ºã®ãŸã‚ã®Union-Findãƒ‡ãƒ¼ã‚¿æ§‹é€ 
  - `SimilarityCalculator`: N-gram/LCSé¡ä¼¼åº¦è¨ˆç®—ï¼ˆ2æ®µéšã‚¢ãƒ—ãƒ­ãƒ¼ãƒï¼‰
  - `RevisionManager`: ãƒªãƒ“ã‚¸ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ãƒ»ç®¡ç†
  - `MethodMatcher`: ãƒ¡ã‚½ãƒƒãƒ‰é–“ãƒãƒƒãƒãƒ³ã‚°ï¼ˆ2æ®µéšã‚¢ãƒ—ãƒ­ãƒ¼ãƒï¼‰
  - `GroupDetector`: ã‚¯ãƒ­ãƒ¼ãƒ³ã‚°ãƒ«ãƒ¼ãƒ—æ¤œå‡º
  - `GroupMatcher`: ã‚°ãƒ«ãƒ¼ãƒ—é–“ãƒãƒƒãƒãƒ³ã‚°
  - `StateClassifier`: çŠ¶æ…‹åˆ†é¡ï¼ˆãƒ¡ã‚½ãƒƒãƒ‰ãƒ»ã‚°ãƒ«ãƒ¼ãƒ—ï¼‰
  - `MethodTracker`: ãƒ¡ã‚½ãƒƒãƒ‰é€²åŒ–è¿½è·¡
  - `CloneGroupTracker`: ã‚¯ãƒ­ãƒ¼ãƒ³ã‚°ãƒ«ãƒ¼ãƒ—é€²åŒ–è¿½è·¡

### CLI ã‚³ãƒãƒ³ãƒ‰

- **track**: ãƒ¡ã‚½ãƒƒãƒ‰ãƒ»ã‚¯ãƒ­ãƒ¼ãƒ³ã‚°ãƒ«ãƒ¼ãƒ—ã®é€²åŒ–è¿½è·¡ï¼ˆä¸»è¦æ©Ÿèƒ½ï¼‰
  - `track methods`: ãƒ¡ã‚½ãƒƒãƒ‰é€²åŒ–è¿½è·¡
  - `track groups`: ã‚¯ãƒ­ãƒ¼ãƒ³ã‚°ãƒ«ãƒ¼ãƒ—é€²åŒ–è¿½è·¡
  - `track all`: ãƒ¡ã‚½ãƒƒãƒ‰ãƒ»ã‚°ãƒ«ãƒ¼ãƒ—ä¸¡æ–¹ã®è¿½è·¡
- **analyze**: ãƒªãƒã‚¸ãƒˆãƒªã‚„ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã®åˆ†æ
- **stats**: çµ±è¨ˆãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®è¨ˆç®—
- **visualize**: ãƒ‡ãƒ¼ã‚¿ã®å¯è¦–åŒ–ï¼ˆæ•£å¸ƒå›³ã€æŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•ã€ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ ãªã©ï¼‰

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
uv sync

# é–‹ç™ºç”¨ä¾å­˜é–¢ä¿‚ã‚‚å«ã‚ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
uv sync --all-groups
```

## ä½¿ã„æ–¹

### åŸºæœ¬çš„ãªä½¿ã„æ–¹

```bash
# ãƒ˜ãƒ«ãƒ—ã®è¡¨ç¤º
b4-thesis --help

# ãƒ¡ã‚½ãƒƒãƒ‰é€²åŒ–è¿½è·¡ï¼ˆä¸»è¦æ©Ÿèƒ½ï¼‰
b4-thesis track methods /path/to/revision_data -o output_dir

# ã‚¯ãƒ­ãƒ¼ãƒ³ã‚°ãƒ«ãƒ¼ãƒ—é€²åŒ–è¿½è·¡
b4-thesis track groups /path/to/revision_data -o output_dir

# ãƒ¡ã‚½ãƒƒãƒ‰ãƒ»ã‚°ãƒ«ãƒ¼ãƒ—ä¸¡æ–¹ã®è¿½è·¡
b4-thesis track all /path/to/revision_data -o output_dir --summary

# ãƒ‡ãƒ¼ã‚¿ã®åˆ†æ
b4-thesis analyze <input_path> -o results.txt

# çµ±è¨ˆæƒ…å ±ã®è¨ˆç®—
b4-thesis stats data.csv -m mean -m std -m median

# å¯è¦–åŒ–ã®ä½œæˆ
b4-thesis visualize data.csv -o plot.png -t scatter --x-column x --y-column y
```

### ã‚³ãƒãƒ³ãƒ‰è©³ç´°

#### track methods

ãƒ¡ã‚½ãƒƒãƒ‰å˜ä½ã®é€²åŒ–ã‚’è¿½è·¡ã—ã¾ã™ã€‚

```bash
b4-thesis track methods <DATA_DIR> [OPTIONS]

Options:
  -o, --output DIRECTORY      å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼‰
  --start-date YYYY-MM-DD     ãƒªãƒ“ã‚¸ãƒ§ãƒ³ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã®é–‹å§‹æ—¥
  --end-date YYYY-MM-DD       ãƒªãƒ“ã‚¸ãƒ§ãƒ³ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã®çµ‚äº†æ—¥
  --similarity INTEGER        ãƒ¡ã‚½ãƒƒãƒ‰ãƒãƒƒãƒãƒ³ã‚°ã®é¡ä¼¼åº¦é–¾å€¤ (0-100, ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 70)
  -p, --parallel              é¡ä¼¼åº¦è¨ˆç®—ã®ä¸¦åˆ—å‡¦ç†ã‚’æœ‰åŠ¹åŒ–ï¼ˆå®Ÿé¨“çš„æ©Ÿèƒ½ï¼‰
  --max-workers INTEGER       ä¸¦åˆ—å‡¦ç†ã®ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹æ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: CPUæ•°ï¼‰
  -s, --summary               ã‚µãƒãƒªãƒ¼çµ±è¨ˆã‚’è¡¨ç¤º
  -v, --verbose               è©³ç´°ãªå‡ºåŠ›ã‚’è¡¨ç¤º
```

**DATA_DIR**: `code_blocks.csv`ã¨`clone_pairs.csv`ã‚’å«ã‚€ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æŒã¤ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª

**å‡ºåŠ›**:
- `method_tracking.csv`: ãƒ¡ã‚½ãƒƒãƒ‰è¿½è·¡çµæœï¼ˆçŠ¶æ…‹åˆ†é¡å«ã‚€ï¼‰

**ä½¿ç”¨ä¾‹**:
```bash
# åŸºæœ¬çš„ãªä½¿ç”¨
b4-thesis track methods ./revision_data -o ./output

# æ—¥ä»˜ç¯„å›²ã‚’æŒ‡å®š
b4-thesis track methods ./revision_data -o ./output --start-date 2024-01-01 --end-date 2024-12-31

# é¡ä¼¼åº¦é–¾å€¤ã‚’å¤‰æ›´ã—ã¦ã‚µãƒãƒªãƒ¼è¡¨ç¤º
b4-thesis track methods ./revision_data -o ./output --similarity 80 --summary

# ä¸¦åˆ—å‡¦ç†ã‚’æœ‰åŠ¹åŒ–ï¼ˆå®Ÿé¨“çš„æ©Ÿèƒ½ - å°è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã§ã¯é€†ã«é…ããªã‚‹å¯èƒ½æ€§ã‚ã‚Šï¼‰
b4-thesis track methods ./revision_data -o ./output --parallel --max-workers 4
```

**æ³¨æ„**: `--parallel`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯å®Ÿé¨“çš„æ©Ÿèƒ½ã§ã™ã€‚å°è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆï¼ˆ<10ãƒªãƒ“ã‚¸ãƒ§ãƒ³ï¼‰ã§ã¯ã€
ãƒ—ãƒ­ã‚»ã‚¹é–“é€šä¿¡ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ã«ã‚ˆã‚Šé€†ã«é…ããªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆï¼ˆ20+ãƒªãƒ“ã‚¸ãƒ§ãƒ³ï¼‰
ã§ã®ä½¿ç”¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚è©³ç´°ã¯[docs/PERFORMANCE.md](docs/PERFORMANCE.md)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

```

#### track groups

ã‚¯ãƒ­ãƒ¼ãƒ³ã‚°ãƒ«ãƒ¼ãƒ—å˜ä½ã®é€²åŒ–ã‚’è¿½è·¡ã—ã¾ã™ã€‚

```bash
b4-thesis track groups <DATA_DIR> [OPTIONS]

Options:
  -o, --output DIRECTORY      å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼‰
  --start-date YYYY-MM-DD     ãƒªãƒ“ã‚¸ãƒ§ãƒ³ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã®é–‹å§‹æ—¥
  --end-date YYYY-MM-DD       ãƒªãƒ“ã‚¸ãƒ§ãƒ³ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã®çµ‚äº†æ—¥
  --similarity INTEGER        ã‚°ãƒ«ãƒ¼ãƒ—æ¤œå‡ºã®é¡ä¼¼åº¦é–¾å€¤ (0-100, ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 70)
  --overlap FLOAT             ã‚°ãƒ«ãƒ¼ãƒ—ãƒãƒƒãƒãƒ³ã‚°ã®é‡è¤‡é–¾å€¤ (0.0-1.0, ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 0.5)
  -s, --summary               ã‚µãƒãƒªãƒ¼çµ±è¨ˆã‚’è¡¨ç¤º
  -v, --verbose               è©³ç´°ãªå‡ºåŠ›ã‚’è¡¨ç¤º
```

**DATA_DIR**: `code_blocks.csv`ã¨`clone_pairs.csv`ã‚’å«ã‚€ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æŒã¤ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª

**å‡ºåŠ›**:
- `group_tracking.csv`: ã‚°ãƒ«ãƒ¼ãƒ—è¿½è·¡çµæœï¼ˆçŠ¶æ…‹åˆ†é¡å«ã‚€ï¼‰
- `group_membership.csv`: å„ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã®ã‚°ãƒ«ãƒ¼ãƒ—ãƒ¡ãƒ³ãƒãƒ¼ã‚·ãƒƒãƒ—ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ

**ä½¿ç”¨ä¾‹**:
```bash
# åŸºæœ¬çš„ãªä½¿ç”¨
b4-thesis track groups ./revision_data -o ./output

# ã‚«ã‚¹ã‚¿ãƒ é–¾å€¤ã§å®Ÿè¡Œ
b4-thesis track groups ./revision_data -o ./output --similarity 75 --overlap 0.6 --verbose
```

#### track all

ãƒ¡ã‚½ãƒƒãƒ‰ã¨ã‚¯ãƒ­ãƒ¼ãƒ³ã‚°ãƒ«ãƒ¼ãƒ—ä¸¡æ–¹ã®é€²åŒ–ã‚’è¿½è·¡ã—ã¾ã™ã€‚

```bash
b4-thesis track all <DATA_DIR> [OPTIONS]

Options:
  -o, --output DIRECTORY      å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼‰
  --start-date YYYY-MM-DD     ãƒªãƒ“ã‚¸ãƒ§ãƒ³ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã®é–‹å§‹æ—¥
  --end-date YYYY-MM-DD       ãƒªãƒ“ã‚¸ãƒ§ãƒ³ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã®çµ‚äº†æ—¥
  --similarity INTEGER        é¡ä¼¼åº¦é–¾å€¤ (0-100, ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 70)
  --overlap FLOAT             ã‚°ãƒ«ãƒ¼ãƒ—ãƒãƒƒãƒãƒ³ã‚°ã®é‡è¤‡é–¾å€¤ (0.0-1.0, ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 0.5)
  -s, --summary               ã‚µãƒãƒªãƒ¼çµ±è¨ˆã‚’è¡¨ç¤º
  -v, --verbose               è©³ç´°ãªå‡ºåŠ›ã‚’è¡¨ç¤º
```

**DATA_DIR**: `code_blocks.csv`ã¨`clone_pairs.csv`ã‚’å«ã‚€ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æŒã¤ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª

**å‡ºåŠ›**:
- `method_tracking.csv`: ãƒ¡ã‚½ãƒƒãƒ‰è¿½è·¡çµæœ
- `group_tracking.csv`: ã‚°ãƒ«ãƒ¼ãƒ—è¿½è·¡çµæœ
- `group_membership.csv`: ã‚°ãƒ«ãƒ¼ãƒ—ãƒ¡ãƒ³ãƒãƒ¼ã‚·ãƒƒãƒ—ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ

**ä½¿ç”¨ä¾‹**:
```bash
# ã™ã¹ã¦ã®è¿½è·¡ã‚’å®Ÿè¡Œ
b4-thesis track all ./revision_data -o ./output --summary

# æœŸé–“ã‚’æŒ‡å®šã—ã¦å®Ÿè¡Œ
b4-thesis track all ./revision_data -o ./output --start-date 2024-06-01 --end-date 2024-12-31
```

#### analyze

ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’åˆ†æã—ã¾ã™ã€‚

```bash
b4-thesis analyze <input_path> [OPTIONS]

Options:
  -o, --output PATH        å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹
  -f, --format [json|csv|txt]  å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: txt)
  -v, --verbose           è©³ç´°ãªå‡ºåŠ›ã‚’è¡¨ç¤º
```

#### stats

CSVãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰çµ±è¨ˆãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’è¨ˆç®—ã—ã¾ã™ã€‚

```bash
b4-thesis stats <input_file> [OPTIONS]

Options:
  -m, --metrics [mean|median|std|min|max|count]  è¨ˆç®—ã™ã‚‹çµ±è¨ˆãƒ¡ãƒˆãƒªã‚¯ã‚¹ï¼ˆè¤‡æ•°æŒ‡å®šå¯ï¼‰
  -c, --column TEXT       åˆ†æå¯¾è±¡ã®åˆ—å
```

#### visualize

ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰å¯è¦–åŒ–ã‚’ä½œæˆã—ã¾ã™ã€‚

```bash
b4-thesis visualize <input_file> -o <output> [OPTIONS]

Options:
  -o, --output PATH       å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ï¼ˆå¿…é ˆï¼‰
  -t, --type [scatter|line|bar|histogram|heatmap]  ã‚°ãƒ©ãƒ•ã®ç¨®é¡
  --x-column TEXT         Xè»¸ã®åˆ—å
  --y-column TEXT         Yè»¸ã®åˆ—å
  --title TEXT            ã‚°ãƒ©ãƒ•ã®ã‚¿ã‚¤ãƒˆãƒ«
```

### å‡ºåŠ›CSVãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

#### method_tracking.csv

ãƒ¡ã‚½ãƒƒãƒ‰é€²åŒ–è¿½è·¡ã®çµæœã‚’å«ã‚€CSVãƒ•ã‚¡ã‚¤ãƒ«ã€‚

| åˆ—å | å‹ | èª¬æ˜ |
|------|------|------|
| `revision` | str | ãƒªãƒ“ã‚¸ãƒ§ãƒ³è­˜åˆ¥å­ |
| `block_id` | str | ãƒ–ãƒ­ãƒƒã‚¯ID |
| `function_name` | str | é–¢æ•°å |
| `file_path` | str | ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ |
| `start_line` | int | é–‹å§‹è¡Œç•ªå· |
| `end_line` | int | çµ‚äº†è¡Œç•ªå· |
| `loc` | int | ã‚³ãƒ¼ãƒ‰è¡Œæ•° |
| `state` | str | çŠ¶æ…‹ (deleted/survived/added) |
| `state_detail` | str | è©³ç´°çŠ¶æ…‹ (deleted_isolated, survived_unchanged, added_to_groupç­‰) |
| `matched_block_id` | str/null | ãƒãƒƒãƒã—ãŸãƒ–ãƒ­ãƒƒã‚¯IDï¼ˆå‰ãƒªãƒ“ã‚¸ãƒ§ãƒ³ï¼‰ |
| `match_type` | str | ãƒãƒƒãƒã‚¿ã‚¤ãƒ— (exact/fuzzy/none) |
| `match_similarity` | int/null | ãƒãƒƒãƒé¡ä¼¼åº¦ (0-100) |
| `clone_count` | int | ã“ã®ãƒ–ãƒ­ãƒƒã‚¯ã®ã‚¯ãƒ­ãƒ¼ãƒ³æ•° |
| `clone_group_id` | str/null | æ‰€å±ã‚¯ãƒ­ãƒ¼ãƒ³ã‚°ãƒ«ãƒ¼ãƒ—ID |
| `clone_group_size` | int | ã‚¯ãƒ­ãƒ¼ãƒ³ã‚°ãƒ«ãƒ¼ãƒ—ã®ã‚µã‚¤ã‚º |
| `lifetime_revisions` | int | ãƒ©ã‚¤ãƒ•ã‚¿ã‚¤ãƒ ï¼ˆãƒªãƒ“ã‚¸ãƒ§ãƒ³æ•°ï¼‰ |
| `lifetime_days` | int | ãƒ©ã‚¤ãƒ•ã‚¿ã‚¤ãƒ ï¼ˆæ—¥æ•°ï¼‰ |

**çŠ¶æ…‹ã®èª¬æ˜**:
- `deleted`: å‰Šé™¤ã•ã‚ŒãŸãƒ¡ã‚½ãƒƒãƒ‰
  - `deleted_isolated`: å­¤ç«‹ãƒ¡ã‚½ãƒƒãƒ‰ã¨ã—ã¦å‰Šé™¤
  - `deleted_from_group`: ã‚¯ãƒ­ãƒ¼ãƒ³ã‚°ãƒ«ãƒ¼ãƒ—ã‹ã‚‰å‰Šé™¤
- `survived`: å­˜ç¶šã—ã¦ã„ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰
  - `survived_unchanged`: å¤‰æ›´ãªã—ã§å­˜ç¶š
  - `survived_modified`: å¤‰æ›´ã‚ã‚Šã§å­˜ç¶š
  - `survived_clone_unchanged`: ã‚¯ãƒ­ãƒ¼ãƒ³ã¨ã—ã¦å¤‰æ›´ãªã—ã§å­˜ç¶š
  - `survived_clone_modified`: ã‚¯ãƒ­ãƒ¼ãƒ³ã¨ã—ã¦å¤‰æ›´ã‚ã‚Šã§å­˜ç¶š
- `added`: æ–°è¦è¿½åŠ ã•ã‚ŒãŸãƒ¡ã‚½ãƒƒãƒ‰
  - `added_isolated`: å­¤ç«‹ãƒ¡ã‚½ãƒƒãƒ‰ã¨ã—ã¦è¿½åŠ 
  - `added_to_group`: ã‚¯ãƒ­ãƒ¼ãƒ³ã‚°ãƒ«ãƒ¼ãƒ—ã«è¿½åŠ 

#### group_tracking.csv

ã‚¯ãƒ­ãƒ¼ãƒ³ã‚°ãƒ«ãƒ¼ãƒ—é€²åŒ–è¿½è·¡ã®çµæœã‚’å«ã‚€CSVãƒ•ã‚¡ã‚¤ãƒ«ã€‚

| åˆ—å | å‹ | èª¬æ˜ |
|------|------|------|
| `revision` | str | ãƒªãƒ“ã‚¸ãƒ§ãƒ³è­˜åˆ¥å­ |
| `group_id` | str | ã‚°ãƒ«ãƒ¼ãƒ—ID |
| `member_count` | int | ãƒ¡ãƒ³ãƒãƒ¼æ•° |
| `avg_similarity` | float/null | å¹³å‡é¡ä¼¼åº¦ |
| `min_similarity` | int/null | æœ€å°é¡ä¼¼åº¦ |
| `max_similarity` | int/null | æœ€å¤§é¡ä¼¼åº¦ |
| `density` | float | ã‚°ãƒ«ãƒ¼ãƒ—å¯†åº¦ (0.0-1.0) |
| `state` | str | çŠ¶æ…‹ (born/continued/grown/shrunk/split/merged/dissolved) |
| `matched_group_id` | str/null | ãƒãƒƒãƒã—ãŸã‚°ãƒ«ãƒ¼ãƒ—IDï¼ˆå‰ãƒªãƒ“ã‚¸ãƒ§ãƒ³ï¼‰ |
| `overlap_ratio` | float/null | é‡è¤‡ç‡ (0.0-1.0) |
| `member_added` | int | è¿½åŠ ã•ã‚ŒãŸãƒ¡ãƒ³ãƒãƒ¼æ•° |
| `member_removed` | int | å‰Šé™¤ã•ã‚ŒãŸãƒ¡ãƒ³ãƒãƒ¼æ•° |
| `lifetime_revisions` | int | ãƒ©ã‚¤ãƒ•ã‚¿ã‚¤ãƒ ï¼ˆãƒªãƒ“ã‚¸ãƒ§ãƒ³æ•°ï¼‰ |
| `lifetime_days` | int | ãƒ©ã‚¤ãƒ•ã‚¿ã‚¤ãƒ ï¼ˆæ—¥æ•°ï¼‰ |

**çŠ¶æ…‹ã®èª¬æ˜**:
- `born`: æ–°è¦ä½œæˆã•ã‚ŒãŸã‚°ãƒ«ãƒ¼ãƒ—
- `continued`: å¤‰æ›´ãªã—ã§ç¶™ç¶š
- `grown`: ãƒ¡ãƒ³ãƒãƒ¼ãŒå¢—åŠ 
- `shrunk`: ãƒ¡ãƒ³ãƒãƒ¼ãŒæ¸›å°‘
- `split`: è¤‡æ•°ã®ã‚°ãƒ«ãƒ¼ãƒ—ã«åˆ†å‰²
- `merged`: ä»–ã®ã‚°ãƒ«ãƒ¼ãƒ—ã¨çµ±åˆ
- `dissolved`: è§£æ•£ï¼ˆã™ã¹ã¦ã®ãƒ¡ãƒ³ãƒãƒ¼ãŒæ¶ˆå¤±ï¼‰

#### group_membership.csv

å„ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã«ãŠã‘ã‚‹ã‚°ãƒ«ãƒ¼ãƒ—ãƒ¡ãƒ³ãƒãƒ¼ã‚·ãƒƒãƒ—ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã€‚

| åˆ—å | å‹ | èª¬æ˜ |
|------|------|------|
| `revision` | str | ãƒªãƒ“ã‚¸ãƒ§ãƒ³è­˜åˆ¥å­ |
| `group_id` | str | ã‚°ãƒ«ãƒ¼ãƒ—ID |
| `block_id` | str | ãƒ–ãƒ­ãƒƒã‚¯ID |
| `function_name` | str | é–¢æ•°å |
| `is_clone` | bool | ã‚¯ãƒ­ãƒ¼ãƒ³ã‹ã©ã†ã‹ |

## è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å‹•ä½œã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã¾ã™ã€‚

ä»¥ä¸‹ã®å ´æ‰€ã« `config.json` ã‚’é…ç½®ã§ãã¾ã™ï¼š
- `~/.config/b4-thesis/config.json`
- `./b4-thesis.json`ï¼ˆã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼‰

è¨­å®šä¾‹ï¼š

```json
{
  "analysis": {
    "output_dir": "./output",
    "default_format": "txt",
    "verbose": false,
    "parallel_jobs": 4
  },
  "visualization": {
    "dpi": 300,
    "figure_size": [10, 6],
    "style": "whitegrid",
    "color_palette": "deep"
  }
}
```

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
b4-thesis/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ b4_thesis/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ cli.py              # CLIã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚       â”œâ”€â”€ commands/           # ã‚³ãƒãƒ³ãƒ‰å®Ÿè£…
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â”œâ”€â”€ track.py        # trackã‚³ãƒãƒ³ãƒ‰ï¼ˆä¸»è¦æ©Ÿèƒ½ï¼‰
â”‚       â”‚   â”œâ”€â”€ analyze.py      # analyzeã‚³ãƒãƒ³ãƒ‰
â”‚       â”‚   â”œâ”€â”€ stats.py        # statsã‚³ãƒãƒ³ãƒ‰
â”‚       â”‚   â””â”€â”€ visualize.py    # visualizeã‚³ãƒãƒ³ãƒ‰
â”‚       â”œâ”€â”€ core/               # ã‚³ã‚¢ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â”œâ”€â”€ config.py       # è¨­å®šç®¡ç†
â”‚       â”‚   â””â”€â”€ revision_manager.py  # ãƒªãƒ“ã‚¸ãƒ§ãƒ³ç®¡ç†
â”‚       â””â”€â”€ analysis/           # åˆ†æãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆPhase 1-3ï¼‰
â”‚           â”œâ”€â”€ __init__.py
â”‚           â”œâ”€â”€ union_find.py   # Union-Findãƒ‡ãƒ¼ã‚¿æ§‹é€ 
â”‚           â”œâ”€â”€ similarity.py   # é¡ä¼¼åº¦è¨ˆç®—
â”‚           â”œâ”€â”€ method_matcher.py      # ãƒ¡ã‚½ãƒƒãƒ‰ãƒãƒƒãƒãƒ³ã‚°
â”‚           â”œâ”€â”€ group_detector.py      # ã‚°ãƒ«ãƒ¼ãƒ—æ¤œå‡º
â”‚           â”œâ”€â”€ group_matcher.py       # ã‚°ãƒ«ãƒ¼ãƒ—ãƒãƒƒãƒãƒ³ã‚°
â”‚           â”œâ”€â”€ state_classifier.py    # çŠ¶æ…‹åˆ†é¡
â”‚           â”œâ”€â”€ method_tracker.py      # ãƒ¡ã‚½ãƒƒãƒ‰è¿½è·¡
â”‚           â””â”€â”€ clone_group_tracker.py # ã‚°ãƒ«ãƒ¼ãƒ—è¿½è·¡
â”œâ”€â”€ tests/                      # ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ191 tests passingï¼‰
â”‚   â”œâ”€â”€ analysis/               # åˆ†æãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ core/                   # ã‚³ã‚¢ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ commands/               # ã‚³ãƒãƒ³ãƒ‰ã®ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ integration/            # çµ±åˆãƒ†ã‚¹ãƒˆ
â”‚   â””â”€â”€ fixtures/               # ãƒ†ã‚¹ãƒˆãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£
â”œâ”€â”€ docs/                       # è©³ç´°è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ pyproject.toml              # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š
â”œâ”€â”€ README.md                   # ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â””â”€â”€ CLAUDE.md                   # é–‹ç™ºè€…å‘ã‘ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
```

## é–‹ç™º

### ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ

```bash
# ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
uv run pytest tests/

# è©³ç´°ãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œ
uv run pytest tests/ -v

# ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
uv run pytest tests/ --cov=b4_thesis --cov-report=html
```

### ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

```bash
# ãƒªãƒ³ãƒˆ + è‡ªå‹•ä¿®æ­£
uv run ruff check --fix src/

# ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
uv run ruff format src/

# ã¾ã¨ã‚ã¦å®Ÿè¡Œ
uv run ruff check --fix src/ && uv run ruff format src/ && uv run pytest tests/
```

## ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

- **click**: CLIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **rich**: ã‚¿ãƒ¼ãƒŸãƒŠãƒ«å‡ºåŠ›ã®è£…é£¾
- **pandas**: ãƒ‡ãƒ¼ã‚¿åˆ†æ
- **numpy**: æ•°å€¤è¨ˆç®—
- **matplotlib/seaborn**: ãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ–
- **networkx**: ã‚°ãƒ©ãƒ•åˆ†æ
- **scikit-learn**: æ©Ÿæ¢°å­¦ç¿’
- **pydantic**: è¨­å®šç®¡ç†

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ç ”ç©¶ç”¨é€”ã®ã¿

## é–‹ç™ºãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

### âœ… Phase 1: åŸºç›¤å®Ÿè£…ï¼ˆå®Œäº† - 2025-11-08ï¼‰

- [x] UnionFind ãƒ‡ãƒ¼ã‚¿æ§‹é€ 
- [x] Similarity è¨ˆç®—ï¼ˆN-gram/LCSã€2æ®µéšã‚¢ãƒ—ãƒ­ãƒ¼ãƒï¼‰
- [x] RevisionManagerï¼ˆãƒªãƒ“ã‚¸ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ç®¡ç†ï¼‰
- [x] ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯æ§‹ç¯‰ï¼ˆ56 tests passingï¼‰

### âœ… Phase 2: ã‚³ã‚¢åˆ†æã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆå®Œäº† - 2025-11-08ï¼‰

- [x] MethodMatcher: ãƒ¡ã‚½ãƒƒãƒ‰é–“ãƒãƒƒãƒãƒ³ã‚°ï¼ˆ2æ®µéšã‚¢ãƒ—ãƒ­ãƒ¼ãƒï¼‰
- [x] GroupDetector: ã‚¯ãƒ­ãƒ¼ãƒ³ã‚°ãƒ«ãƒ¼ãƒ—æ¤œå‡º
- [x] GroupMatcher: ã‚°ãƒ«ãƒ¼ãƒ—é–“ãƒãƒƒãƒãƒ³ã‚°
- [x] StateClassifier: çŠ¶æ…‹åˆ†é¡ï¼ˆãƒ¡ã‚½ãƒƒãƒ‰ãƒ»ã‚°ãƒ«ãƒ¼ãƒ—ï¼‰
- [x] ãƒ†ã‚¹ãƒˆæ‹¡å……ï¼ˆ123 tests passingï¼‰

### âœ… Phase 3: è¿½è·¡ã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆå®Œäº† - 2025-11-09ï¼‰

- [x] MethodTracker: ãƒ¡ã‚½ãƒƒãƒ‰é€²åŒ–è¿½è·¡
- [x] CloneGroupTracker: ã‚¯ãƒ­ãƒ¼ãƒ³ã‚°ãƒ«ãƒ¼ãƒ—é€²åŒ–è¿½è·¡
- [x] ãƒ©ã‚¤ãƒ•ã‚¿ã‚¤ãƒ è¨ˆç®—æ©Ÿèƒ½
- [x] ãƒ†ã‚¹ãƒˆæ‹¡å……ï¼ˆ162 tests passingï¼‰

### ğŸ”„ Phase 4: CLIã‚³ãƒãƒ³ãƒ‰çµ±åˆï¼ˆé€²è¡Œä¸­ - 2025-11-09ï¼‰

- [x] track ã‚³ãƒãƒ³ãƒ‰å®Ÿè£…ï¼ˆmethods/groups/allï¼‰
- [x] çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆ191 tests passing, 82% coverageï¼‰
- [x] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°ï¼ˆREADME/CLAUDEï¼‰
- [ ] çµ±è¨ˆãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆæ©Ÿèƒ½
- [ ] å¯è¦–åŒ–æ©Ÿèƒ½æ‹¡å¼µ

### ğŸ“… Phase 5: é«˜åº¦ãªæ©Ÿèƒ½ï¼ˆè¨ˆç”»ä¸­ï¼‰

- [ ] ä¸¦åˆ—å‡¦ç†æœ€é©åŒ–
- [ ] å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆå¯¾å¿œ
- [ ] ãƒ¬ãƒãƒ¼ãƒˆè‡ªå‹•ç”Ÿæˆï¼ˆMarkdown/PDFï¼‰
- [ ] å®Ÿãƒ‡ãƒ¼ã‚¿ã§ã®æ¤œè¨¼ãƒ†ã‚¹ãƒˆ
